{
    "@graph": [
        {
            "@id": "_:b0",
            "@type": "volt:Operation",
            "lhs": "?bearing",
            "operator": "<",
            "rhs": "?upper"
        },
        {
            "@id": "_:b12",
            "@type": "volt:YieldStage",
            "condition": "_:b41"
        },
        {
            "@id": "_:b13",
            "@type": "volt:Operation",
            "lhs": "?bearing",
            "operator": ">=",
            "rhs": "?lower"
        },
        {
            "@id": "_:b14",
            "@type": "volt:Operation",
            "lhs": "?bearing",
            "operator": ">=",
            "rhs": "?lower"
        },
        {
            "@id": "_:b15",
            "@type": "volt:EvaluateStage",
            "evaluate": [
                "_:b7",
                "_:b16"
            ]
        },
        {
            "@id": "_:b16",
            "expression": "_:b38",
            "variable": "?lower"
        },
        {
            "@id": "_:b18",
            "@type": "volt:Group",
            "item": [
                "_:b52",
                "_:b42"
            ],
            "name": "?direction"
        },
        {
            "@id": "_:b19",
            "@type": "volt:Operation",
            "lhs": "?bearing",
            "operator": "<",
            "rhs": "?upper"
        },
        {
            "@id": "_:b21",
            "@type": "volt:Triple",
            "object": "?geometryA",
            "predicate": "http://www.w3.org/2003/01/geo/wgs84_pos#geometry",
            "subject": "volt:ThisSubject"
        },
        {
            "@id": "_:b22",
            "@type": "volt:Operation",
            "lhs": "?bearing",
            "operator": ">=",
            "rhs": "?lower"
        },
        {
            "@id": "_:b23",
            "@type": "volt:EvaluateStage",
            "evaluate": "_:b24"
        },
        {
            "@id": "_:b24",
            "expression": "_:b50",
            "variable": "?bearing"
        },
        {
            "@id": "_:b25",
            "@type": "volt:YieldStage",
            "condition": "_:b26"
        },
        {
            "@id": "_:b26",
            "@type": "volt:Operation",
            "volt:lhs": {
                "@id": "_:b13"
            },
            "operator": "||",
            "volt:rhs": {
                "@id": "_:b0"
            }
        },
        {
            "@id": "_:b27",
            "@type": "volt:Operation",
            "volt:lhs": {
                "@id": "volt:ThisSubject"
            },
            "operator": "!=",
            "volt:rhs": {
                "@id": "volt:ThisObject"
            }
        },
        {
            "@id": "_:b29",
            "@type": "volt:IfThenElse",
            "else": {
                "@list": [
                    "_:b12"
                ]
            },
            "if": "_:b59",
            "then": {
                "@list": [
                    "_:b30",
                    "_:b33"
                ]
            }
        },
        {
            "@id": "_:b3",
            "@type": "volt:Operation",
            "lhs": "?heading",
            "operator": "+",
            "volt:rhs": {
                "@id": "_:b4"
            }
        },
        {
            "@id": "_:b30",
            "@type": "volt:EvaluateStage",
            "evaluate": "_:b31"
        },
        {
            "@id": "_:b31",
            "expression": "_:b53",
            "variable": "?upper"
        },
        {
            "@id": "_:b32",
            "@type": "volt:Operation",
            "lhs": "?lower",
            "operator": "<",
            "volt:rhs": 0
        },
        {
            "@id": "_:b33",
            "@type": "volt:YieldStage",
            "condition": "_:b34"
        },
        {
            "@id": "_:b34",
            "@type": "volt:Operation",
            "volt:lhs": {
                "@id": "_:b22"
            },
            "operator": "||",
            "volt:rhs": {
                "@id": "_:b19"
            }
        },
        {
            "@id": "_:b35",
            "@type": "volt:Filter",
            "expression": "_:b27"
        },
        {
            "@id": "_:b36",
            "@type": "volt:EvaluateStage",
            "evaluate": "_:b37"
        },
        {
            "@id": "_:b37",
            "expression": "_:b43",
            "variable": "?lower"
        },
        {
            "@id": "_:b38",
            "@type": "volt:Operation",
            "lhs": "?heading",
            "operator": "-",
            "volt:rhs": {
                "@id": "_:b39"
            }
        },
        {
            "@id": "_:b39",
            "@type": "volt:Operation",
            "lhs": "?spread",
            "operator": "/",
            "volt:rhs": 2
        },
        {
            "@id": "_:b4",
            "@type": "volt:Operation",
            "lhs": "?spread",
            "operator": "/",
            "volt:rhs": 2
        },
        {
            "@id": "_:b40",
            "@type": "volt:Triple",
            "object": "?geometryB",
            "predicate": "http://www.w3.org/2003/01/geo/wgs84_pos#geometry",
            "subject": "volt:ThisObject"
        },
        {
            "@id": "_:b41",
            "@type": "volt:Operation",
            "volt:lhs": {
                "@id": "_:b14"
            },
            "operator": "&&",
            "volt:rhs": {
                "@id": "_:b51"
            }
        },
        {
            "@id": "_:b42",
            "name": "?heading",
            "property": "stko:heading"
        },
        {
            "@id": "_:b43",
            "@type": "volt:Operation",
            "volt:lhs": {
                "@id": "_:b8"
            },
            "operator": "%",
            "volt:rhs": {
                "@type": "xsd:decimal",
                "@value": "6.283185307179586"
            }
        },
        {
            "@id": "_:b46",
            "@type": "volt:IfThenElse",
            "else": {
                "@list": [
                    "_:b29"
                ]
            },
            "if": "_:b32",
            "then": {
                "@list": [
                    "_:b36",
                    "_:b25"
                ]
            }
        },
        {
            "@id": "_:b47",
            "@type": "volt:QueryStage",
            "query": "_:b48"
        },
        {
            "@id": "_:b48",
            "@type": "volt:SelectQuery",
            "volt:select": {
                "@list": [
                    {
                        "@id": "volt:ThisSubject"
                    },
                    {
                        "@type": "volt:Variable",
                        "@value": "?geometryA"
                    },
                    {
                        "@id": "volt:ThisObject"
                    },
                    {
                        "@type": "volt:Variable",
                        "@value": "?geometryB"
                    }
                ]
            },
            "where": {
                "@list": [
                    "_:b5",
                    "_:b35"
                ]
            }
        },
        {
            "@id": "_:b5",
            "@type": "volt:BasicGraphPattern",
            "triples": {
                "@list": [
                    "_:b21",
                    "_:b40"
                ]
            }
        },
        {
            "@id": "_:b50",
            "@type": "volt:FunctionCall",
            "volt:arguments": {
                "@list": [
                    {
                        "@type": "volt:Variable",
                        "@value": "?geometryA"
                    },
                    {
                        "@type": "volt:Variable",
                        "@value": "?geometryB"
                    }
                ]
            },
            "function": "http://postgis.net/function/azimuth"
        },
        {
            "@id": "_:b51",
            "@type": "volt:Operation",
            "lhs": "?bearing",
            "operator": "<",
            "rhs": "?upper"
        },
        {
            "@id": "_:b52",
            "name": "?spread",
            "property": "stko:spread"
        },
        {
            "@id": "_:b53",
            "@type": "volt:Operation",
            "lhs": "?upper",
            "operator": "%",
            "volt:rhs": {
                "@type": "xsd:decimal",
                "@value": "6.283185307179586"
            }
        },
        {
            "@id": "_:b59",
            "@type": "volt:Operation",
            "lhs": "?upper",
            "operator": ">",
            "volt:rhs": {
                "@type": "xsd:decimal",
                "@value": "6.283185307179586"
            }
        },
        {
            "@id": "_:b7",
            "expression": "_:b3",
            "variable": "?upper"
        },
        {
            "@id": "_:b8",
            "@type": "volt:Operation",
            "lhs": "?lower",
            "operator": "+",
            "volt:rhs": {
                "@type": "xsd:decimal",
                "@value": "6.283185307179586"
            }
        },
        {
            "@id": "stko:PointsTowards",
            "@type": "volt:AbstractProperty",
            "abstractField": "_:b18",
            "stages": {
                "@list": [
                    "_:b15",
                    "_:b47",
                    "_:b23",
                    "_:b46"
                ]
            },
            "volt:version": "indicates if subject points ?direction towards object"
        }
    ],
    "@context": {
        "rhs": {
            "@id": "http://volt-name.space/ontology/rhs",
            "@type": "http://volt-name.space/ontology/Variable"
        },
        "lhs": {
            "@id": "http://volt-name.space/ontology/lhs",
            "@type": "http://volt-name.space/ontology/Variable"
        },
        "operator": {
            "@id": "http://volt-name.space/ontology/operator",
            "@type": "http://volt-name.space/ontology/Operator"
        },
        "rest": {
            "@id": "http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",
            "@type": "@id"
        },
        "first": {
            "@id": "http://www.w3.org/1999/02/22-rdf-syntax-ns#first",
            "@type": "@id"
        },
        "triples": {
            "@id": "http://volt-name.space/ontology/triples",
            "@type": "@id"
        },
        "expression": {
            "@id": "http://volt-name.space/ontology/expression",
            "@type": "@id"
        },
        "variable": {
            "@id": "http://volt-name.space/ontology/variable",
            "@type": "http://volt-name.space/ontology/Variable"
        },
        "evaluate": {
            "@id": "http://volt-name.space/ontology/evaluate",
            "@type": "@id"
        },
        "stages": {
            "@id": "http://volt-name.space/ontology/stages",
            "@type": "@id"
        },
        "abstractField": {
            "@id": "http://volt-name.space/ontology/abstractField",
            "@type": "@id"
        },
        "version": {
            "@id": "http://volt-name.space/ontology/version",
            "@type": "http://www.w3.org/2001/XMLSchema#string"
        },
        "condition": {
            "@id": "http://volt-name.space/ontology/condition",
            "@type": "@id"
        },
        "property": {
            "@id": "http://volt-name.space/ontology/property",
            "@type": "@id"
        },
        "name": {
            "@id": "http://volt-name.space/ontology/name",
            "@type": "http://volt-name.space/ontology/Variable"
        },
        "query": {
            "@id": "http://volt-name.space/ontology/query",
            "@type": "@id"
        },
        "item": {
            "@id": "http://volt-name.space/ontology/item",
            "@type": "@id"
        },
        "else": {
            "@id": "http://volt-name.space/ontology/else",
            "@type": "@id"
        },
        "then": {
            "@id": "http://volt-name.space/ontology/then",
            "@type": "@id"
        },
        "if": {
            "@id": "http://volt-name.space/ontology/if",
            "@type": "@id"
        },
        "arguments": {
            "@id": "http://volt-name.space/ontology/arguments",
            "@type": "@id"
        },
        "function": {
            "@id": "http://volt-name.space/ontology/function",
            "@type": "@id"
        },
        "object": {
            "@id": "http://volt-name.space/ontology/object",
            "@type": "http://volt-name.space/ontology/Variable"
        },
        "predicate": {
            "@id": "http://volt-name.space/ontology/predicate",
            "@type": "@id"
        },
        "subject": {
            "@id": "http://volt-name.space/ontology/subject",
            "@type": "@id"
        },
        "where": {
            "@id": "http://volt-name.space/ontology/where",
            "@type": "@id"
        },
        "select": {
            "@id": "http://volt-name.space/ontology/select",
            "@type": "@id"
        },
        "output": "http://volt-name.space/vocab/output#",
        "input": "http://volt-name.space/vocab/input#",
        "stko": "http://stko.geog.ucsb.edu/vocab/",
        "color": "vocab://color/",
        "ns": "vocab://ns/",
        "owl": "http://www.w3.org/2002/07/owl#",
        "rdf": "http://www.w3.org/1999/02/22-rdf-syntax-ns#",
        "volt": "http://volt-name.space/ontology/",
        "plant": "vocab://plant/",
        "xsd": "http://www.w3.org/2001/XMLSchema#",
        "rdfs": "http://www.w3.org/2000/01/rdf-schema#",
        "graph": "graph://"
    }
}